<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="Bluefish 2.2.6" />
  <title></title>
  <style type="text/css">
    body {
      background-color: #25383C;
      overflow: hidden;
    }
    
    #container {
      display: table;
      position: absolute;
      height: 100%;
      width: 100%;
      text-align: center;
    }
    
    #middle {
      display: table-cell;
      vertical-align: middle;
      text-align: center;
      margin-left: auto;
      margin-right: auto;
    }
    
    #player {
      width: 853px;
      height: 480px;
    }

  </style>
</head>
<body>

<div id="container">
<div id="middle">
<div id="player">
</div>
</div>
</div>

<script>
  // This code loads the IFrame Player API code asynchronously.
  var tag = document.createElement('script');

  tag.src = "https://www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  var nextVid;
  var nextVidType;

  var player;
  function onYouTubeIframeAPIReady() {
    
    nextVid = getVideo('warmup');
    nextVidType = 'countdown-workout';
    
    player = new YT.Player('player', {
      height: '480',
      width: '853',
      videoId: 'rzfmZC3kg3M',
      events: {
        'onReady': onPlayerReady,
        'onStateChange': onPlayerStateChange
      }
    });
    
  }


  function onPlayerReady(event) {
    player.playVideo();
  }
  
  var countdown = {videoId: 'rzfmZC3kg3M'};
  var fanfare = {videoId: 'kvpyz6MUa1w'};
  function onPlayerStateChange(event) {
    if (event.data == YT.PlayerState.ENDED) {
      if (nextVid){

        player.loadVideoById(nextVid);
        
        switch(nextVidType) {
          case 'workout':
            nextVid = getVideo('workout');
            nextVidType = 'countdown-cooldown';
            break;
          case 'cooldown':
            nextVid = getVideo('cooldown');
            nextVidType = 'fanfare';
            break;
          case 'countdown-workout':
            nextVid = countdown;
            nextVidType = 'workout';
            break;
          case 'countdown-cooldown':
            nextVid = countdown;
            nextVidType = 'cooldown';
            break;
          case 'fanfare':
            nextVid = fanfare;
            nextVidType = 'done';
            break;
          case 'done':
            nextVid = false;
            break;
        }
      }
    }
  }
  
  var videoList = [
  {videoId: "", startSeconds: 0, endSeconds: 0},
  {videoId: "", startSeconds: 0, endSeconds: 0},
  ];
  var cooldownList = [
  {videoId: "", startSeconds: 0, endSeconds: 0},
  {videoId: "", startSeconds: 0, endSeconds: 0},
  ];
  var warmupList=[
  {videoId: "", startSeconds: 0, endSeconds: 0},
  {videoId: "", startSeconds: 0, endSeconds: 0},
  ];
  
  function getVideo(type) {
    var list = videoList;
    if(type=="cooldown"){
      list = cooldownList;
    }
    else if (type=="warmup") {
      list = warmupList;
    }
    var idx = Math.floor(Math.random() * list.length)
    return list[idx];
  }


</script>

</body>
</html>
