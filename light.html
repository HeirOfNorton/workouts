<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="Bluefish 2.2.6" />
  <title></title>
  <style type="text/css">
    body {
      background-color: #25383C;
      overflow: hidden;
    }
    
    #container {
      display: table;
      position: absolute;
      height: 100%;
      width: 100%;
      text-align: center;
    }
    
    #middle {
      display: table-cell;
      vertical-align: middle;
      text-align: center;
      margin-left: auto;
      margin-right: auto;
    }
    
    #player {
      width: 853px;
      height: 480px;
    }
    
    #music {
      width: 200px;
      height: 200px;
      position: absolute;
      margin-left: 10000px;
    }
  </style>
</head>
<body>

<div id="container">
<div id="middle">
<div id="player">
</div>
</div>
</div>

<iframe id="music" type="text/html" width="200" height="200"
  src="http://www.youtube.com/embed/videoseries?enablejsapi=1&list=PL5wotU8ZcY2jVy3jPpKe8n49ajxsYuMnr&listtype=playlist"></iframe>

<script>
  // This code loads the IFrame Player API code asynchronously.
  var tag = document.createElement('script');

  tag.src = "https://www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  var nextVid;

  var player;
  var music;
  function onYouTubeIframeAPIReady() {
    
    var nextVid = getVideo('workout');
    
    player = new YT.Player('player', {
      height: '480',
      width: '853',
      videoId: 'rzfmZC3kg3M',
      events: {
        'onReady': onPlayerReady,
        'onStateChange': onPlayerStateChange
      }
    });
    
    music = new YT.Player('music', {
      events: {
        'onReady': onMusicReady
      }
    
    });
  }

  function onMusicReady(event) {
    targ = event.target;
    targ.setPlaybackQuality('small');
    targ.setLoop(true);
    targ.setShuffle(true);
    targ.setVolume(100);
    targ.playVideo();
  }

  // 4. The API will call this function when the video player is ready.
  function onPlayerReady(event) {
    event.target.playVideo();
  }

  function onPlayerStateChange(event) {
    if (event.data == YT.PlayerState.ENDED) {
      if (nextVid){
        player.loadVideoById(nextVid);
        if (nextVid.cooldown) {
          nextVid = getVideo('cooldown');
        }
        else {
          nextVid = false;
        }
      }
    }
  }
  
  var videoList = [
  {videoId: "", startAt: 0, cooldown: true},
  {videoId: "", startAt: 0, cooldown: true},
  ];
  var cooldownList = [
  {videoId: "", startAt: 0},
  {videoId: "", startAt: 0},
  ];
  
  function getVideo(type) {
    var list = videoList;
    if(type=="cooldown"){
      list = cooldownList;
    }
    var idx = Math.floor(Math.random() * list.length)
    return list[idx];
  }


</script>

</body>
</html>
